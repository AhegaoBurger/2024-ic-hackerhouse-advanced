(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6657:(e,a,s)=>{Promise.resolve().then(s.bind(s,9173))},9173:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>X});var t=s(7949),r=s(5849),n=s(106),i=s(6476),o=s(5155),l=s(5742),c=s(2175),u=s(2115),m=s(3618),d=s(3463),g=s(9795);function f(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,g.QP)((0,d.$)(a))}var p=u.forwardRef(function(e,a){var s=e.className,t=(0,c._)(e,["className"]);return(0,o.jsx)(m.bL,(0,l._)({ref:a,className:f("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s)},t))});p.displayName=m.bL.displayName;var h=u.forwardRef(function(e,a){var s=e.className,t=(0,c._)(e,["className"]);return(0,o.jsx)(m._V,(0,l._)({ref:a,className:f("aspect-square h-full w-full",s)},t))});h.displayName=m._V.displayName;var v=u.forwardRef(function(e,a){var s=e.className,t=(0,c._)(e,["className"]);return(0,o.jsx)(m.H4,(0,l._)({ref:a,className:f("flex h-full w-full items-center justify-center rounded-full bg-muted",s)},t))});v.displayName=m.H4.displayName;var b=s(1290),x=s(652),y=(0,x.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),w=u.forwardRef(function(e,a){var s=e.className,t=e.variant,r=e.size,n=e.asChild,i=(0,c._)(e,["className","variant","size","asChild"]),u=void 0!==n&&n?b.DX:"button";return(0,o.jsx)(u,(0,l._)({className:f(y({variant:t,size:r,className:s})),ref:a},i))});w.displayName="Button";var N=s(5843);function j(){return(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:[(0,o.jsx)("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:(0,o.jsx)("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:(0,o.jsx)("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),(0,o.jsx)("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:(0,o.jsx)("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}var _=(0,x.F)("flex gap-2 max-w-[60%] items-end relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),k=u.forwardRef(function(e,a){var s=e.className,t=e.variant,r=e.layout,n=e.children,i=(0,c._)(e,["className","variant","layout","children"]);return(0,o.jsx)("div",(0,N._)((0,l._)({className:f(_({variant:t,layout:r,className:s}),"relative group"),ref:a},i),{children:u.Children.map(n,function(e){return u.isValidElement(e)&&"string"!=typeof e.type?u.cloneElement(e,{variant:t,layout:r}):e})}))});k.displayName="ChatBubble";var I=(0,x.F)("p-4",{variants:{variant:{received:"bg-secondary text-secondary-foreground rounded-r-lg rounded-tl-lg",sent:"bg-primary text-primary-foreground rounded-l-lg rounded-tr-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),C=u.forwardRef(function(e,a){var s=e.className,t=e.variant,r=e.layout,n=e.isLoading,i=e.children,u=(0,c._)(e,["className","variant","layout","isLoading","children"]);return(0,o.jsx)("div",(0,N._)((0,l._)({className:f(I({variant:t,layout:r,className:s}),"break-words max-w-full whitespace-pre-wrap"),ref:a},u),{children:void 0!==n&&n?(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsx)(j,{})}):i}))});C.displayName="ChatBubbleMessage";var A=function(e){var a=e.icon,s=e.onClick,t=e.className,r=e.variant,n=e.size,i=(0,c._)(e,["icon","onClick","className","variant","size"]);return(0,o.jsx)(w,(0,N._)((0,l._)({variant:void 0===r?"ghost":r,size:void 0===n?"icon":n,className:t,onClick:s},i),{children:a}))};u.forwardRef(function(e,a){var s=e.variant,t=e.className,r=e.children,n=(0,c._)(e,["variant","className","children"]);return(0,o.jsx)("div",(0,N._)((0,l._)({ref:a,className:f("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200","sent"===s?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",t)},n),{children:r}))}).displayName="ChatBubbleActionWrapper";var M=u.forwardRef(function(e,a){var s=e.className,t=(0,c._)(e,["className"]);return(0,o.jsx)("textarea",(0,l._)({className:f("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a},t))});M.displayName="Textarea";var R=u.forwardRef(function(e,a){var s=e.className,t=(0,c._)(e,["className"]);return(0,o.jsx)(M,(0,l._)({autoComplete:"off",ref:a,name:"message",className:f("max-h-12 px-4 py-3 bg-background text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 w-full rounded-md flex items-center h-16 resize-none",s)},t))});R.displayName="ChatInput";var z=u.forwardRef(function(e,a){var s=e.className,t=e.children,r=(0,c._)(e,["className","children"]);return(0,o.jsx)("div",(0,N._)((0,l._)({className:f("flex flex-col w-full h-full p-4 gap-6 overflow-y-auto",s),ref:a},r),{children:t}))});z.displayName="ChatMessageList";var H=[{id:1,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",messages:[],name:"Jane Doe"},{id:2,avatar:"https://images.freeimages.com/images/large-previews/fdd/man-avatar-1632964.jpg?fmt=webp&h=350",messages:[],name:"John Doe"},{id:3,avatar:"https://images.freeimages.com/images/large-previews/d1f/lady-avatar-1632967.jpg?fmt=webp&h=350",messages:[],name:"Elizabeth Smith"},{id:4,avatar:"https://images.freeimages.com/images/large-previews/023/geek-avatar-1632962.jpg?fmt=webp&h=350",messages:[],name:"John Smith"},{id:5,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",messages:[],name:"Jakob Hoeg"}],B=[{id:1,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",messages:[{id:1,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"Hey, Jakob",timestamp:"10:00 AM"},{id:2,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"Hey!",timestamp:"10:01 AM"},{id:3,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"How are you?",timestamp:"10:02 AM"},{id:4,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"I am good, you?",timestamp:"10:03 AM"},{id:5,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"I am good too!",timestamp:"10:04 AM"},{id:6,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"That is good to hear!",timestamp:"10:05 AM",isLiked:!0},{id:7,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"How has your day been so far?",timestamp:"10:06 AM"},{id:8,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"It has been good. I went for a run this morning and then had a nice breakfast. How about you?",timestamp:"10:10 AM"},{id:9,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",isLoading:!0}],name:"Jane Doe"},{id:2,avatar:"https://images.freeimages.com/images/large-previews/fdd/man-avatar-1632964.jpg?fmt=webp&h=350",name:"John Doe",messages:[]},{id:3,avatar:"https://images.freeimages.com/images/large-previews/d1f/lady-avatar-1632967.jpg?fmt=webp&h=350",name:"Elizabeth Smith",messages:[]},{id:4,avatar:"https://images.freeimages.com/images/large-previews/023/geek-avatar-1632962.jpg?fmt=webp&h=350",name:"John Smith",messages:[]}],J=[{id:1,avatar:"/",name:"ChatBot",message:"Hello! How can I help you today?",timestamp:"10:00 AM",role:"ai"},{id:2,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"I need help with my order",timestamp:"10:01 AM",role:"user"},{id:3,avatar:"/",name:"ChatBot",message:"Sure! Please provide me with your order number",timestamp:"10:02 AM",role:"ai"},{id:4,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"123456",timestamp:"10:03 AM",role:"user"},{id:5,avatar:"/",name:"ChatBot",message:"Thank you! One moment please while I look up your order",timestamp:"10:04 AM",role:"ai"},{id:6,avatar:"/",name:"ChatBot",message:"I have found your order. It is currently being processed and will be shipped out soon.",timestamp:"10:05 AM",role:"ai"},{id:7,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"Thank you for your help!",timestamp:"10:06 AM",role:"user"},{id:8,avatar:"/",name:"ChatBot",message:"You are welcome! Have a great day!",isLoading:!0,timestamp:"10:10 AM",role:"ai"}],V=(0,s(9827).v)()(function(e){return{selectedUser:H[4],selectedExample:{name:"Messenger example",url:"/"},examples:[{name:"Messenger example",url:"/"},{name:"Chatbot example",url:"/chatbot"},{name:"Chatbot2 example",url:"/chatbot2"}],input:"",setSelectedExample:function(a){return e({selectedExample:a})},setExamples:function(a){return e({examples:a})},setInput:function(a){return e({input:a})},handleInputChange:function(a){return e({input:a.target.value})},chatBotMessages:J,setchatBotMessages:function(a){return e(function(e){return{chatBotMessages:a(e.chatBotMessages)}})},messages:B[0].messages,setMessages:function(a){return e(function(e){return{messages:a(e.messages)}})},hasInitialAIResponse:!1,setHasInitialAIResponse:function(a){return e({hasInitialAIResponse:a})},hasInitialResponse:!1,setHasInitialResponse:function(a){return e({hasInitialResponse:a})}}}),E=s(5683),S=s(6899),F=s(1539),T=s(4834),L=s(5220),D=s(5015),q=s(6164),O=s(5583),P=s(914),U=function(e,a){var s=new P.qB({host:"http://127.0.0.1:4943"});return s.fetchRootKey().catch(function(e){console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),P.Ag.createActor(e,{agent:s,canisterId:a})},K=U(function(e){var a=e.IDL,s=a.Record({text:a.Text,tokens:a.Vec(a.Int64)}),t=a.Record({text:a.Text,tokens:a.Vec(a.Int64)});return a.Service({decode:a.Func([a.Vec(a.Int64)],[a.Text],["query"]),encode:a.Func([a.Text],[s],["query"]),generate_text:a.Func([a.Text,a.Nat8],[a.Variant({Ok:t,Err:a.Text})],[]),initialize_tokenizer:a.Func([a.Vec(a.Nat8),a.Vec(a.Nat8)],[a.Variant({Ok:a.Null,Err:a.Text})],[])})},"bd3sg-teaaa-aaaaa-qaaba-cai"),Y=U(function(e){var a=e.IDL,s=a.Variant({Ok:a.Vec(a.Int64),Err:a.Text});return a.Service({append_model_bytes:a.Func([a.Vec(a.Nat8)],[],[]),clear_model_bytes:a.Func([],[],[]),model_bytes_length:a.Func([],[a.Nat64],["query"]),model_inference:a.Func([a.Nat8,a.Vec(a.Int64)],[s],[]),setup_model:a.Func([],[a.Opt(a.Text)],[])})},"bkyz2-fmaaa-aaaaa-qaaaq-cai"),G=[{icon:F.A,label:"Copy"},{icon:T.A,label:"Refresh"},{icon:L.A,label:"Volume"}];function X(){var e,a=V(function(e){return e.chatBotMessages}),s=V(function(e){return e.setchatBotMessages}),l=V(function(e){return e.selectedUser}),c=V(function(e){return e.input}),m=V(function(e){return e.setInput}),d=V(function(e){return e.handleInputChange}),g=V(function(e){return e.hasInitialAIResponse}),f=V(function(e){return e.setHasInitialAIResponse}),b=(0,r._)((0,u.useState)(!1),2),x=b[0],y=b[1],N=(0,u.useRef)(null),j=(0,u.useRef)(null),_=(0,u.useRef)(null);(0,u.useEffect)(function(){N.current&&(N.current.scrollTop=N.current.scrollHeight)},[a]);var I=(e=(0,t._)(function(e){var a,t,r,o,u;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(e.preventDefault(),!c)return[2];y(!0),i.label=1;case 1:return i.trys.push([1,7,8,9]),console.log("Message received"),s(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:l.avatar,name:l.name,role:"user",message:c}])}),console.log("input: ",c,K),[4,K.encode(c)];case 2:return console.log("tokenizeResult: ",t=i.sent()),[4,Y.model_inference(5,t.tokens)];case 3:if(console.log("modelResponse: ",r=i.sent()),!("Ok"in r))return[3,5];return[4,K.decode(r.Ok)];case 4:return console.log("decodeResponse: ",o=i.sent()),s(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:o}])}),[3,6];case 5:s(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:"Sorry, I encountered an error processing your message."}])}),i.label=6;case 6:return[3,9];case 7:return console.error("Chat error:",i.sent()),s(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:"Sorry, something went wrong. Please try again."}])}),[3,9];case 8:return y(!1),m(""),null===(u=_.current)||void 0===u||u.reset(),[7];case 9:return m(""),null===(a=_.current)||void 0===a||a.reset(),[2]}})}),function(a){return e.apply(this,arguments)});return(0,u.useEffect)(function(){j.current&&j.current.focus(),g||(y(!0),setTimeout(function(){s(function(e){return(0,n._)(e.slice(0,e.length-1)).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:"Sure! If you have any more questions, feel free to ask."}])}),y(!1),f(!0)},2500))},[]),(0,o.jsx)("div",{className:"h-full w-full",children:(0,o.jsxs)("div",{className:"relative flex h-full flex-col rounded-xl bg-muted/20 dark:bg-muted/40 p-4 lg:col-span-2",children:[(0,o.jsx)(z,{ref:N,children:(0,o.jsx)(E.N,{children:a.map(function(e,a){var s="ai"===e.role?"received":"sent";return(0,o.jsx)(S.P.div,{layout:!0,initial:{opacity:0,scale:1,y:50,x:0},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:1,y:1,x:0},transition:{opacity:{duration:.1},layout:{type:"spring",bounce:.3,duration:.05*a+.2}},style:{originX:.5,originY:.5},className:"flex flex-col gap-2 p-4",children:(0,o.jsxs)(k,{variant:s,children:[(0,o.jsxs)(p,{children:[(0,o.jsx)(h,{src:"ai"===e.role?"":e.avatar,alt:"Avatar",className:"ai"===e.role?"dark:invert":""}),(0,o.jsx)(v,{children:"ai"===e.role?"\uD83E\uDD16":"GG"})]}),(0,o.jsxs)(C,{isLoading:e.isLoading,children:[e.message,"ai"===e.role&&(0,o.jsx)("div",{className:"flex items-center mt-1.5 gap-1",children:!e.isLoading&&(0,o.jsx)(o.Fragment,{children:G.map(function(e,a){var s=e.icon;return(0,o.jsx)(A,{variant:"outline",className:"size-6",icon:(0,o.jsx)(s,{className:"size-3"}),onClick:function(){return console.log("Action "+e.label+" clicked for message "+a)}},a)})})})]})]},a)},a)})})}),(0,o.jsx)("div",{className:"flex-1"}),(0,o.jsxs)("form",{ref:_,onSubmit:I,className:"relative rounded-lg border bg-background focus-within:ring-1 focus-within:ring-ring",children:[(0,o.jsx)(R,{ref:j,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||I(e)},onChange:d,placeholder:"Type your message here...",className:"min-h-12 resize-none rounded-lg bg-background border-0 p-3 shadow-none focus-visible:ring-0"}),(0,o.jsxs)("div",{className:"flex items-center p-3 pt-0",children:[(0,o.jsxs)(w,{variant:"ghost",size:"icon",children:[(0,o.jsx)(D.A,{className:"size-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Attach file"})]}),(0,o.jsxs)(w,{variant:"ghost",size:"icon",children:[(0,o.jsx)(q.A,{className:"size-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Use Microphone"})]}),(0,o.jsxs)(w,{disabled:!c||x,type:"submit",size:"sm",className:"ml-auto gap-1.5",children:["Send Message",(0,o.jsx)(O.A,{className:"size-3.5"})]})]})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[212,441,517,358],()=>a(6657)),_N_E=e.O()}]);