(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6657:(e,a,t)=>{Promise.resolve().then(t.bind(t,468))},468:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ee});var s=t(7949),r=t(5849),n=t(106),i=t(6476),o=t(5155),c=t(5742),l=t(2175),u=t(2115),m=t(3618),d=t(3463),g=t(9795);function p(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,g.QP)((0,d.$)(a))}var f=u.forwardRef(function(e,a){var t=e.className,s=(0,l._)(e,["className"]);return(0,o.jsx)(m.bL,(0,c._)({ref:a,className:p("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t)},s))});f.displayName=m.bL.displayName;var h=u.forwardRef(function(e,a){var t=e.className,s=(0,l._)(e,["className"]);return(0,o.jsx)(m._V,(0,c._)({ref:a,className:p("aspect-square h-full w-full",t)},s))});h.displayName=m._V.displayName;var v=u.forwardRef(function(e,a){var t=e.className,s=(0,l._)(e,["className"]);return(0,o.jsx)(m.H4,(0,c._)({ref:a,className:p("flex h-full w-full items-center justify-center rounded-full bg-muted",t)},s))});v.displayName=m.H4.displayName;var b=t(1290),x=t(652),y=(0,x.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),w=u.forwardRef(function(e,a){var t=e.className,s=e.variant,r=e.size,n=e.asChild,i=(0,l._)(e,["className","variant","size","asChild"]),u=void 0!==n&&n?b.DX:"button";return(0,o.jsx)(u,(0,c._)({className:p(y({variant:s,size:r,className:t})),ref:a},i))});w.displayName="Button";var N=t(5843);function _(){return(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:[(0,o.jsx)("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:(0,o.jsx)("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:(0,o.jsx)("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),(0,o.jsx)("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:(0,o.jsx)("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}var j=(0,x.F)("flex gap-2 max-w-[60%] items-end relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),k=u.forwardRef(function(e,a){var t=e.className,s=e.variant,r=e.layout,n=e.children,i=(0,l._)(e,["className","variant","layout","children"]);return(0,o.jsx)("div",(0,N._)((0,c._)({className:p(j({variant:s,layout:r,className:t}),"relative group"),ref:a},i),{children:u.Children.map(n,function(e){return u.isValidElement(e)&&"string"!=typeof e.type?u.cloneElement(e,{variant:s,layout:r}):e})}))});k.displayName="ChatBubble";var I=(0,x.F)("p-4",{variants:{variant:{received:"bg-secondary text-secondary-foreground rounded-r-lg rounded-tl-lg",sent:"bg-primary text-primary-foreground rounded-l-lg rounded-tr-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),A=u.forwardRef(function(e,a){var t=e.className,s=e.variant,r=e.layout,n=e.isLoading,i=e.children,u=(0,l._)(e,["className","variant","layout","isLoading","children"]);return(0,o.jsx)("div",(0,N._)((0,c._)({className:p(I({variant:s,layout:r,className:t}),"break-words max-w-full whitespace-pre-wrap"),ref:a},u),{children:void 0!==n&&n?(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsx)(_,{})}):i}))});A.displayName="ChatBubbleMessage";var C=function(e){var a=e.icon,t=e.onClick,s=e.className,r=e.variant,n=e.size,i=(0,l._)(e,["icon","onClick","className","variant","size"]);return(0,o.jsx)(w,(0,N._)((0,c._)({variant:void 0===r?"ghost":r,size:void 0===n?"icon":n,className:s,onClick:t},i),{children:a}))};u.forwardRef(function(e,a){var t=e.variant,s=e.className,r=e.children,n=(0,l._)(e,["variant","className","children"]);return(0,o.jsx)("div",(0,N._)((0,c._)({ref:a,className:p("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200","sent"===t?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",s)},n),{children:r}))}).displayName="ChatBubbleActionWrapper";var R=u.forwardRef(function(e,a){var t=e.className,s=(0,l._)(e,["className"]);return(0,o.jsx)("textarea",(0,c._)({className:p("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a},s))});R.displayName="Textarea";var M=u.forwardRef(function(e,a){var t=e.className,s=(0,l._)(e,["className"]);return(0,o.jsx)(R,(0,c._)({autoComplete:"off",ref:a,name:"message",className:p("max-h-12 px-4 py-3 bg-background text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 w-full rounded-md flex items-center h-16 resize-none",t)},s))});M.displayName="ChatInput";var O=u.forwardRef(function(e,a){var t=e.className,s=e.children,r=(0,l._)(e,["className","children"]);return(0,o.jsx)("div",(0,N._)((0,c._)({className:p("flex flex-col w-full h-full p-4 gap-6 overflow-y-auto",t),ref:a},r),{children:s}))});O.displayName="ChatMessageList";var E=[{id:1,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",messages:[],name:"Jane Doe"},{id:2,avatar:"https://images.freeimages.com/images/large-previews/fdd/man-avatar-1632964.jpg?fmt=webp&h=350",messages:[],name:"John Doe"},{id:3,avatar:"https://images.freeimages.com/images/large-previews/d1f/lady-avatar-1632967.jpg?fmt=webp&h=350",messages:[],name:"Elizabeth Smith"},{id:4,avatar:"https://images.freeimages.com/images/large-previews/023/geek-avatar-1632962.jpg?fmt=webp&h=350",messages:[],name:"John Smith"},{id:5,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",messages:[],name:"Jakob Hoeg"}],H=[{id:1,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",messages:[{id:1,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"Hey, Jakob",timestamp:"10:00 AM"},{id:2,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"Hey!",timestamp:"10:01 AM"},{id:3,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"How are you?",timestamp:"10:02 AM"},{id:4,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"I am good, you?",timestamp:"10:03 AM"},{id:5,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"I am good too!",timestamp:"10:04 AM"},{id:6,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"That is good to hear!",timestamp:"10:05 AM",isLiked:!0},{id:7,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",message:"How has your day been so far?",timestamp:"10:06 AM"},{id:8,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"It has been good. I went for a run this morning and then had a nice breakfast. How about you?",timestamp:"10:10 AM"},{id:9,avatar:"https://images.freeimages.com/images/large-previews/971/basic-shape-avatar-1632968.jpg?fmt=webp&h=350",name:"Jane Doe",isLoading:!0}],name:"Jane Doe"},{id:2,avatar:"https://images.freeimages.com/images/large-previews/fdd/man-avatar-1632964.jpg?fmt=webp&h=350",name:"John Doe",messages:[]},{id:3,avatar:"https://images.freeimages.com/images/large-previews/d1f/lady-avatar-1632967.jpg?fmt=webp&h=350",name:"Elizabeth Smith",messages:[]},{id:4,avatar:"https://images.freeimages.com/images/large-previews/023/geek-avatar-1632962.jpg?fmt=webp&h=350",name:"John Smith",messages:[]}],z=[{id:1,avatar:"/",name:"ChatBot",message:"Hello! How can I help you today?",timestamp:"10:00 AM",role:"ai"},{id:2,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"I need help with my order",timestamp:"10:01 AM",role:"user"},{id:3,avatar:"/",name:"ChatBot",message:"Sure! Please provide me with your order number",timestamp:"10:02 AM",role:"ai"},{id:4,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"123456",timestamp:"10:03 AM",role:"user"},{id:5,avatar:"/",name:"ChatBot",message:"Thank you! One moment please while I look up your order",timestamp:"10:04 AM",role:"ai"},{id:6,avatar:"/",name:"ChatBot",message:"I have found your order. It is currently being processed and will be shipped out soon.",timestamp:"10:05 AM",role:"ai"},{id:7,avatar:"https://avatars.githubusercontent.com/u/114422072?s=400&u=8a176a310ca29c1578a70b1c33bdeea42bf000b4&v=4",name:"Jakob Hoeg",message:"Thank you for your help!",timestamp:"10:06 AM",role:"user"},{id:8,avatar:"/",name:"ChatBot",message:"You are welcome! Have a great day!",isLoading:!0,timestamp:"10:10 AM",role:"ai"}],B=(0,t(9827).v)()(function(e){return{selectedUser:E[4],selectedExample:{name:"Messenger example",url:"/"},examples:[{name:"Messenger example",url:"/"},{name:"Chatbot example",url:"/chatbot"},{name:"Chatbot2 example",url:"/chatbot2"}],input:"",setSelectedExample:function(a){return e({selectedExample:a})},setExamples:function(a){return e({examples:a})},setInput:function(a){return e({input:a})},handleInputChange:function(a){return e({input:a.target.value})},chatBotMessages:z,setchatBotMessages:function(a){return e(function(e){return{chatBotMessages:a(e.chatBotMessages)}})},messages:H[0].messages,setMessages:function(a){return e(function(e){return{messages:a(e.messages)}})},hasInitialAIResponse:!1,setHasInitialAIResponse:function(a){return e({hasInitialAIResponse:a})},hasInitialResponse:!1,setHasInitialResponse:function(a){return e({hasInitialResponse:a})}}}),T=t(5683),D=t(6899),J=t(1539),S=t(4834),F=t(5220),L=t(5015),V=t(6164),q=t(5583),P=t(5888),K=function(e){var a=e.IDL,t=a.Record({text:a.Text,tokens:a.Vec(a.Int64)}),s=a.Record({text:a.Text,tokens:a.Vec(a.Int64)});return a.Service({decode:a.Func([a.Vec(a.Int64)],[a.Text],["query"]),encode:a.Func([a.Text],[t],["query"]),generate_text:a.Func([a.Text,a.Nat8],[a.Variant({Ok:s,Err:a.Text})],[]),initialize_tokenizer:a.Func([a.Vec(a.Nat8),a.Vec(a.Nat8)],[a.Variant({Ok:a.Null,Err:a.Text})],[])})},U=t(459),G=U.env.CANISTER_ID_ICP_HELLO_WORLD_RUST_BACKEND,W=G?function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.agent||new P.qB((0,c._)({},a.agentOptions));return a.agent&&a.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),"ic"!==U.env.DFX_NETWORK&&t.fetchRootKey().catch(function(e){console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),P.Ag.createActor(K,(0,c._)({agent:t,canisterId:e},a.actorOptions))}(G):void 0,X=function(e){var a=e.IDL,t=a.Variant({Ok:a.Vec(a.Int64),Err:a.Text});return a.Service({append_model_bytes:a.Func([a.Vec(a.Nat8)],[],[]),clear_model_bytes:a.Func([],[],[]),model_bytes_length:a.Func([],[a.Nat64],["query"]),model_inference:a.Func([a.Nat8,a.Vec(a.Int64)],[t],[]),setup_model:a.Func([],[a.Opt(a.Text)],[])})},Y=t(459),Q=Y.env.CANISTER_ID_ICP_GPT2,$=Q?function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.agent||new P.qB((0,c._)({},a.agentOptions));return a.agent&&a.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),"ic"!==Y.env.DFX_NETWORK&&t.fetchRootKey().catch(function(e){console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),P.Ag.createActor(X,(0,c._)({agent:t,canisterId:e},a.actorOptions))}(Q):void 0,Z=[{icon:J.A,label:"Copy"},{icon:S.A,label:"Refresh"},{icon:F.A,label:"Volume"}];function ee(){var e,a=B(function(e){return e.chatBotMessages}),t=B(function(e){return e.setchatBotMessages}),c=B(function(e){return e.selectedUser}),l=B(function(e){return e.input}),m=B(function(e){return e.setInput}),d=B(function(e){return e.handleInputChange}),g=B(function(e){return e.hasInitialAIResponse}),p=B(function(e){return e.setHasInitialAIResponse}),b=(0,r._)((0,u.useState)(!1),2),x=b[0],y=b[1],N=(0,u.useRef)(null),_=(0,u.useRef)(null),j=(0,u.useRef)(null);(0,u.useEffect)(function(){N.current&&(N.current.scrollTop=N.current.scrollHeight)},[a]);var I=(e=(0,s._)(function(e){var a,s,r,o,u;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(e.preventDefault(),!l)return[2];y(!0),i.label=1;case 1:return i.trys.push([1,7,8,9]),t(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:c.avatar,name:c.name,role:"user",message:l}])}),[4,W.encode(l)];case 2:return s=i.sent(),[4,$.model_inference(20,s.tokens)];case 3:if(!("Ok"in(r=i.sent())))return[3,5];return[4,W.decode(r.Ok)];case 4:return o=i.sent(),t(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:o}])}),[3,6];case 5:console.error("GPT2 error:",r.Err),t(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:"Sorry, I encountered an error processing your message."}])}),i.label=6;case 6:return[3,9];case 7:return console.error("Chat error:",i.sent()),t(function(e){return(0,n._)(e).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:"Sorry, something went wrong. Please try again."}])}),[3,9];case 8:return y(!1),m(""),null===(u=j.current)||void 0===u||u.reset(),[7];case 9:return m(""),null===(a=j.current)||void 0===a||a.reset(),[2]}})}),function(a){return e.apply(this,arguments)});return(0,u.useEffect)(function(){_.current&&_.current.focus(),g||(y(!0),setTimeout(function(){t(function(e){return(0,n._)(e.slice(0,e.length-1)).concat([{id:e.length+1,avatar:"",name:"ChatBot",role:"ai",message:"Sure! If you have any more questions, feel free to ask."}])}),y(!1),p(!0)},2500))},[]),(0,o.jsx)("div",{className:"h-full w-full",children:(0,o.jsxs)("div",{className:"relative flex h-full flex-col rounded-xl bg-muted/20 dark:bg-muted/40 p-4 lg:col-span-2",children:[(0,o.jsx)(O,{ref:N,children:(0,o.jsx)(T.N,{children:a.map(function(e,a){var t="ai"===e.role?"received":"sent";return(0,o.jsx)(D.P.div,{layout:!0,initial:{opacity:0,scale:1,y:50,x:0},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:1,y:1,x:0},transition:{opacity:{duration:.1},layout:{type:"spring",bounce:.3,duration:.05*a+.2}},style:{originX:.5,originY:.5},className:"flex flex-col gap-2 p-4",children:(0,o.jsxs)(k,{variant:t,children:[(0,o.jsxs)(f,{children:[(0,o.jsx)(h,{src:"ai"===e.role?"":e.avatar,alt:"Avatar",className:"ai"===e.role?"dark:invert":""}),(0,o.jsx)(v,{children:"ai"===e.role?"\uD83E\uDD16":"GG"})]}),(0,o.jsxs)(A,{isLoading:e.isLoading,children:[e.message,"ai"===e.role&&(0,o.jsx)("div",{className:"flex items-center mt-1.5 gap-1",children:!e.isLoading&&(0,o.jsx)(o.Fragment,{children:Z.map(function(e,a){var t=e.icon;return(0,o.jsx)(C,{variant:"outline",className:"size-6",icon:(0,o.jsx)(t,{className:"size-3"}),onClick:function(){return console.log("Action "+e.label+" clicked for message "+a)}},a)})})})]})]},a)},a)})})}),(0,o.jsx)("div",{className:"flex-1"}),(0,o.jsxs)("form",{ref:j,onSubmit:I,className:"relative rounded-lg border bg-background focus-within:ring-1 focus-within:ring-ring",children:[(0,o.jsx)(M,{ref:_,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||I(e)},onChange:d,placeholder:"Type your message here...",className:"min-h-12 resize-none rounded-lg bg-background border-0 p-3 shadow-none focus-visible:ring-0"}),(0,o.jsxs)("div",{className:"flex items-center p-3 pt-0",children:[(0,o.jsxs)(w,{variant:"ghost",size:"icon",children:[(0,o.jsx)(L.A,{className:"size-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Attach file"})]}),(0,o.jsxs)(w,{variant:"ghost",size:"icon",children:[(0,o.jsx)(V.A,{className:"size-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Use Microphone"})]}),(0,o.jsxs)(w,{disabled:!l||x,type:"submit",size:"sm",className:"ml-auto gap-1.5",children:["Send Message",(0,o.jsx)(q.A,{className:"size-3.5"})]})]})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[834,441,517,358],()=>a(6657)),_N_E=e.O()}]);